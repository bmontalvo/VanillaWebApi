<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>
  <div class="widget">
    <ol id="selectable"></ol>
  </div>

  <script>
    $.get('/directory', function (data) {
        var result = data;
        result.map(function (item) {
          var actions = item.actions.map(function (action) {
            var actionClick;
            var actionIcon;
            switch (action.name) {
              case 'copy-file':
                actionIcon = 'ui-icon-copy';
                actionClick = function () {
                  alert('copy!');
                };
                break;

              case 'move-file':
                actionIcon = 'ui-icon-copy';
                actionClick = function () {
                  alert('move!');
                };
                break;

              case 'delete-file':
                actionIcon = 'ui-icon-trash';
                actionClick = function () {
                  alert('delete!');
                };
                break;

              case 'download-file':
                actionIcon = 'ui-icon-arrowthickstop-1-s';
                actionClick = function () {
                  alert('download!');
                };
                break;

            }

            var actionButton = $('<button />',
            {
              title: action.title,
              click: actionClick,
            });
            actionButton.button({icons: { primary: actionIcon }});

            return actionButton;
          });

          var listItem = $('<li />',
          {
            class: 'ui-widget-content',
            text: item.displayName
          });

          actions.map(function (action) {
            action.appendTo(listItem);
          });

          $("#selectable").append(listItem);

//            item.actions.map(function (action) {
//                $("#selectable").append('')
//            });

        });
    }).done(function () {
        $("#selectable").selectable();
    });
  </script>
</body>
</html>
